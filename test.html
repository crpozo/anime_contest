<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Anime Opening Quiz Game</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        .game-container {
            max-width: 900px; margin: 0 auto;
            background: rgba(255,255,255,0.95);
            border-radius: 20px; padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .header { text-align:center; margin-bottom:30px; }
        .header h1 {
            color:#4a5568; font-size:2.5em; margin-bottom:10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .score-board {
            display:flex; justify-content:space-between;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color:#fff; padding:15px 20px; border-radius:15px;
            margin-bottom:20px; font-weight:bold;
        }

        .audio-container { 
            margin-bottom:30px; text-align:center; 
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .audio-player {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .audio-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .play-button {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #56ab2f, #a8e6cf);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: #fff;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .play-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.3);
        }

        .play-button.playing {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .audio-info {
            color: #fff;
            font-size: 1.1em;
            font-weight: 600;
        }

        .progress-container {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            height: 8px;
            margin: 15px 0;
            overflow: hidden;
            cursor: pointer;
        }

        .progress-bar {
            background: linear-gradient(90deg, #56ab2f, #a8e6cf);
            height: 100%;
            width: 0%;
            border-radius: 10px;
            transition: width 0.1s ease;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            color: rgba(255,255,255,0.8);
            font-size: 0.9em;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fff;
        }

        .volume-slider {
            width: 100px;
            height: 5px;
            background: rgba(255,255,255,0.3);
            border-radius: 5px;
            outline: none;
            cursor: pointer;
            appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #56ab2f;
            cursor: pointer;
        }

        .question-container { margin-bottom:30px; }
        .question {
            font-size:1.4em; font-weight:bold; margin-bottom:20px; text-align:center; color:#2d3748;
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            padding:20px; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.1);
        }

        .options {
            display:grid; grid-template-columns:repeat(auto-fit, minmax(200px,1fr)); gap:15px;
        }
        .option {
            padding:15px 20px; background:linear-gradient(135deg, #84fab0, #8fd3f4);
            border:none; border-radius:12px; cursor:pointer;
            font-size:1.1em; font-weight:600; color:#2d3748;
            transition: all .3s ease; box-shadow:0 5px 15px rgba(0,0,0,0.1);
        }
        .option:hover { transform: translateY(-3px); box-shadow:0 8px 25px rgba(0,0,0,0.15); background:linear-gradient(135deg,#a8edea,#fed6e3); }
        .option.correct { background:linear-gradient(135deg, #56ab2f, #a8e6cf); animation: correctPulse .6s ease; }
        .option.incorrect { background:linear-gradient(135deg, #ff416c, #ff4b2b); color:#fff; animation: incorrectShake .6s ease; }

        @keyframes correctPulse { 0%{transform:scale(1)} 50%{transform:scale(1.05)} 100%{transform:scale(1)} }
        @keyframes incorrectShake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-5px)} 75%{transform:translateX(5px)} }

        .next-button {
            display:none; margin:30px auto 0; padding:15px 30px;
            background:linear-gradient(135deg, #667eea, #764ba2);
            color:#fff; border:none; border-radius:12px; font-size:1.2em; font-weight:bold;
            cursor:pointer; transition: all .3s ease; box-shadow:0 5px 15px rgba(0,0,0,0.2);
        }
        .next-button:hover { transform: translateY(-2px); box-shadow:0 8px 25px rgba(0,0,0,0.3); }

        .game-progress-bar { width:100%; height:8px; background:#e2e8f0; border-radius:10px; margin-bottom:20px; overflow:hidden; }
        .game-progress-fill { height:100%; background:linear-gradient(90deg,#667eea,#764ba2); transition:width .5s ease; border-radius:10px; }

        .game-over {
            display:none; text-align:center; padding:40px;
            background:linear-gradient(135deg, #ffecd2, #fcb69f);
            border-radius:20px; margin-top:30px;
        }
        .game-over h2 { color:#2d3748; font-size:2.2em; margin-bottom:20px; }
        .final-score { font-size:1.8em; font-weight:bold; color:#e53e3e; margin-bottom:20px; }
        .restart-button {
            padding:15px 30px; background:linear-gradient(135deg, #ff6b6b, #ee5a24); color:#fff;
            border:none; border-radius:12px; font-size:1.2em; font-weight:bold; cursor:pointer;
            transition: all .3s ease; box-shadow:0 5px 15px rgba(0,0,0,0.2);
        }
        .restart-button:hover { transform: translateY(-2px); box-shadow:0 8px 25px rgba(0,0,0,0.3); }

        .audio-error {
            display:flex; flex-direction:column; align-items:center; justify-content:center;
            height:200px; background:linear-gradient(135deg, #ff416c, #ff4b2b);
            color:#fff; text-align:center; padding:30px; border-radius:15px;
        }
        .error-emoji { font-size:3em; margin-bottom:15px; }
        .retry-button {
            margin-top:15px; padding:10px 20px; background:rgba(255,255,255,.2);
            color:#fff; border:1px solid #fff; border-radius:8px; cursor:pointer; transition: all .3s ease;
        }
        .retry-button:hover { background:rgba(255,255,255,.3); }

        .hint {
            margin-top: 15px;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            color: rgba(255,255,255,0.8);
            font-size: 0.9em;
        }
    </style>
</head>
<body>
<div class="game-container">
    <div class="header">
        <h1>üéµ Anime Opening Quiz üéµ</h1>
        <p style="color:#666; margin-top:10px;">Listen to the opening and guess which anime it's from!</p>
    </div>

    <div class="score-board">
        <div>Question: <span id="currentQuestion">1</span> of <span id="totalQuestions">6</span></div>
        <div>Score: <span id="score">0</span></div>
    </div>

    <div class="game-progress-bar">
        <div class="game-progress-fill" id="progressFill" style="width: 16.66%;"></div>
    </div>

    <div id="gameArea">
        <div class="audio-container">
            <div class="audio-player" id="audioPlayer">
                <div class="audio-controls">
                    <button class="play-button" id="playButton" onclick="toggleAudio()">‚ñ∂Ô∏è</button>
                    <div class="volume-control">
                        <span>üîä</span>
                        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="70">
                    </div>
                </div>
                <div class="progress-container" onclick="seek(event)">
                    <div class="progress-bar" id="audioProgressBar"></div>
                </div>
                <div class="time-display">
                    <span id="currentTime">0:00</span>
                    <span id="totalTime">0:00</span>
                </div>
                <div class="hint" id="audioHint">üéß Click play to hear the opening theme!</div>
            </div>
            <div class="audio-info" id="audioInfo">üéµ Anime Opening Theme</div>
        </div>

        <div class="question-container">
            <div class="question" id="questionText">Which anime is this opening from?</div>
            <div class="options" id="optionsContainer"></div>
        </div>

        <button class="next-button" id="nextButton" onclick="nextQuestion()">Next Question</button>
    </div>

    <div class="game-over" id="gameOver">
        <h2>Game Complete!</h2>
        <div class="final-score" id="finalScore"></div>
        <button class="restart-button" onclick="restartGame()">Play Again</button>
    </div>
</div>

<script>
// Real anime opening audio files from Archive.org
const questions = [
  {
    audio: "https://dn721608.ca.archive.org/0/items/attack-on-titan-season-2-opening-theme-shinzou-wo-sasageyo-buentema.-app/Attack%20on%20Titan%20Season%202%20%E2%80%93%20Opening%20Theme%20%E2%80%93%20Shinzou%20wo%20Sasageyo%21%20%28BUENTEMA.APP%29.mp3",
    fallback: "https://archive.org/download/linked-horizon-shinzou-wo-sasageyou/y2mate.com%20-%20Attack%20on%20Titan%20Season%202%20Opening%20Theme%20Shinzou%20wo%20Sasageyo.mp3",
    info: "üéµ Attack on Titan Season 2 - 'Shinzou wo Sasageyo!' by Linked Horizon",
    question: "Which anime is this epic opening from?",
    options: ["Demon Slayer", "Attack on Titan", "Jujutsu Kaisen", "Tokyo Revengers"],
    correct: 1,
    hint: "This opening is about dedicating your heart to humanity's fight for freedom!"
  },
  {
    audio: "https://archive.org/download/attack-on-titan-season-2-opening-full-linked-horizon-shinzou-wo-sasageyo-320-kbps/Linked%20Horizon%20-%20Guren%20No%20Yumiya%20%28Attack%20On%20Titan%29%20FULL%20Opening%20Theme%20HQ%20%28320%20kbps%29.mp3",
    fallback: "https://archive.org/download/linked-horizon-shinzou-wo-sasageyou/y2mate.com%20-%20Attack%20on%20Titan%20Opening%20Theme%20Feuerroter%20Pfeil%20und%20Bogen.mp3",
    info: "üéµ Attack on Titan Season 1 - 'Guren no Yumiya' by Linked Horizon",
    question: "This is the very first opening of which legendary anime?",
    options: ["One Punch Man", "Attack on Titan", "My Hero Academia", "Fullmetal Alchemist"],
    correct: 1,
    hint: "The title translates to 'Crimson Bow and Arrow' - humanity's first weapon against the titans!"
  },
  {
    audio: "https://archive.org/download/attack-on-titan-season-2-opening-full-linked-horizon-shinzou-wo-sasageyo-320-kbps/Demon%20Slayer_%20Kimetsu%20no%20Yaiba%20-%20Opening%20Full%E3%80%8EGurenge%E3%80%8Fby%20LiSA%20%28320%20kbps%29.mp3",
    fallback: "https://archive.org/download/attack-on-titan-season-2-opening-full-linked-horizon-shinzou-wo-sasageyo-320-kbps/Demon%20Slayer_%20Kimetsu%20no%20Yaiba%20-%20Opening%20Full%E3%80%8EGurenge%E3%80%8Fby%20LiSA%20%28320%20kbps%29.mp3",
    info: "üéµ Demon Slayer - 'Gurenge' by LiSA",
    question: "This powerful opening belongs to which demon-fighting anime?",
    options: ["Demon Slayer", "Bleach", "Blue Exorcist", "Soul Eater"],
    correct: 0,
    hint: "'Gurenge' means 'Red Lotus' - representing the fierce flame of determination!"
  },
  {
    audio: "https://archive.org/download/attack-on-titan-season-2-opening-full-linked-horizon-shinzou-wo-sasageyo-320-kbps/%5BOfficial%20Video%5D%20JAM%20Project%20-%20THE%20HERO%20%21%21%20-%20One%20Punch%20Man%20Opening%20Theme%20%E3%83%AF%E3%83%B3%E3%83%91%E3%83%B3%E3%83%9E%E3%83%B3%20%28320%20kbps%29.mp3",
    fallback: "https://archive.org/download/attack-on-titan-season-2-opening-full-linked-horizon-shinzou-wo-sasageyo-320-kbps/%5BOfficial%20Video%5D%20JAM%20Project%20-%20THE%20HERO%20%21%21%20-%20One%20Punch%20Man%20Opening%20Theme%20%E3%83%AF%E3%83%B3%E3%83%91%E3%83%B3%E3%83%9E%E3%83%B3%20%28320%20kbps%29.mp3",
    info: "üéµ One Punch Man - 'THE HERO!!' by JAM Project",
    question: "Which overpowered hero does this opening belong to?",
    options: ["All Might", "Saitama", "Goku", "Mob"],
    correct: 1,
    hint: "This hero can defeat any enemy with just one punch!"
  },
  {
    audio: "https://archive.org/download/attack-on-titan-season-2-opening-full-linked-horizon-shinzou-wo-sasageyo-320-kbps/No%20Game%20No%20Life%20Opening%20Full%20%28320%20kbps%29.mp3",
    fallback: "https://archive.org/download/attack-on-titan-season-2-opening-full-linked-horizon-shinzou-wo-sasageyo-320-kbps/No%20Game%20No%20Life%20Opening%20Full%20%28320%20kbps%29.mp3",
    info: "üéµ No Game No Life - 'This Game' by Konomi Suzuki",
    question: "This gaming-themed opening is from which anime?",
    options: ["Log Horizon", "Sword Art Online", "No Game No Life", "Overlord"],
    correct: 2,
    hint: "Life is just a game to these genius siblings who never lose!"
  },
  {
    audio: "https://archive.org/download/attack-on-titan-season-2-opening-full-linked-horizon-shinzou-wo-sasageyo-320-kbps/Re_Re_%20-%20Asian%20Kung-Fu%20Generation%20__%20ERASED%20__%20Boku%20Dake%20ga%20Inai%20Machi%20OP%20%28320%20kbps%29.mp3",
    fallback: "https://archive.org/download/attack-on-titan-season-2-opening-full-linked-horizon-shinzou-wo-sasageyo-320-kbps/Re_Re_%20-%20Asian%20Kung-Fu%20Generation%20__%20ERASED%20__%20Boku%20Dake%20ga%20Inai%20Machi%20OP%20%28320%20kbps%29.mp3",
    info: "üéµ ERASED - 'Re:Re:' by Asian Kung-Fu Generation",
    question: "This time-travel mystery anime opening is from?",
    options: ["Steins;Gate", "ERASED", "Tokyo Revengers", "The Girl Who Leapt Through Time"],
    correct: 1,
    hint: "The protagonist uses his 'Revival' ability to prevent tragedies by going back in time!"
  }
];

let currentQuestionIndex = 0;
let score = 0;
let answered = false;
let currentAudio = null;
let isPlaying = false;

function showAudioError() {
  const audioPlayer = document.getElementById('audioPlayer');
  audioPlayer.innerHTML = `
    <div class="audio-error">
      <div class="error-emoji">üö´</div>
      <div style="font-size:1.2em; margin-bottom:10px;">Audio unavailable</div>
      <div style="font-size:.9em; margin-bottom:15px;">Error loading audio file</div>
      <button class="retry-button" onclick="loadAudio(true)">Try alternative audio</button>
    </div>
  `;
}

function loadAudio(useFallback = false) {
  const q = questions[currentQuestionIndex];
  const audioUrl = useFallback ? q.fallback : q.audio;

  if (currentAudio) {
    currentAudio.pause();
    currentAudio = null;
  }

  currentAudio = new Audio(audioUrl);
  currentAudio.volume = 0.7;
  currentAudio.crossOrigin = "anonymous";

  currentAudio.addEventListener('loadedmetadata', () => {
    document.getElementById('totalTime').textContent = formatTime(currentAudio.duration);
    resetAudioPlayer();
  });

  currentAudio.addEventListener('timeupdate', updateProgress);
  
  currentAudio.addEventListener('ended', () => {
    resetPlayButton();
    isPlaying = false;
  });

  currentAudio.addEventListener('error', (e) => {
    console.error('Audio error:', e);
    if (!useFallback) {
      showAudioError();
    }
  });

  // Setup volume control
  const volumeSlider = document.getElementById('volumeSlider');
  volumeSlider.addEventListener('input', (e) => {
    if (currentAudio) {
      currentAudio.volume = e.target.value / 100;
    }
  });
}

function toggleAudio() {
  if (!currentAudio) return;

  const playButton = document.getElementById('playButton');
  
  if (isPlaying) {
    currentAudio.pause();
    playButton.textContent = '‚ñ∂Ô∏è';
    playButton.classList.remove('playing');
    isPlaying = false;
  } else {
    currentAudio.play().then(() => {
      playButton.textContent = '‚è∏Ô∏è';
      playButton.classList.add('playing');
      isPlaying = true;
    }).catch(error => {
      console.error('Error playing audio:', error);
      showAudioError();
    });
  }
}

function seek(event) {
  if (!currentAudio) return;
  
  const progressContainer = event.currentTarget;
  const clickX = event.offsetX;
  const width = progressContainer.offsetWidth;
  const seekTime = (clickX / width) * currentAudio.duration;
  
  currentAudio.currentTime = seekTime;
}

function updateProgress() {
  if (!currentAudio) return;
  
  const progress = (currentAudio.currentTime / currentAudio.duration) * 100;
  document.getElementById('audioProgressBar').style.width = progress + '%';
  document.getElementById('currentTime').textContent = formatTime(currentAudio.currentTime);
}

function formatTime(seconds) {
  const minutes = Math.floor(seconds / 60);
  const remainingSeconds = Math.floor(seconds % 60);
  return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
}

function resetPlayButton() {
  const playButton = document.getElementById('playButton');
  playButton.textContent = '‚ñ∂Ô∏è';
  playButton.classList.remove('playing');
}

function resetAudioPlayer() {
  resetPlayButton();
  document.getElementById('audioProgressBar').style.width = '0%';
  document.getElementById('currentTime').textContent = '0:00';
  isPlaying = false;
}

function loadQuestion() {
  const q = questions[currentQuestionIndex];

  // Reset and load new audio
  resetAudioPlayer();
  loadAudio();

  // Audio info
  document.getElementById('audioInfo').innerHTML = q.info;
  document.getElementById('audioHint').innerHTML = q.hint;

  // Question
  document.getElementById('questionText').textContent = q.question;
  document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
  document.getElementById('totalQuestions').textContent = questions.length;

  // Options
  const optionsContainer = document.getElementById('optionsContainer');
  optionsContainer.innerHTML = '';

  q.options.forEach((option, index) => {
    const btn = document.createElement('button');
    btn.className = 'option';
    btn.textContent = option;
    btn.onclick = () => selectAnswer(index);
    optionsContainer.appendChild(btn);
  });

  updateGameProgress();
  answered = false;
  document.getElementById('nextButton').style.display = 'none';
}

function selectAnswer(selectedIndex) {
  if (answered) return;
  answered = true;

  // Pause audio when answering
  if (currentAudio && isPlaying) {
    currentAudio.pause();
    resetPlayButton();
    isPlaying = false;
  }

  const q = questions[currentQuestionIndex];
  const options = document.querySelectorAll('.option');

  options.forEach((opt, idx) => {
    if (idx === q.correct) {
      opt.classList.add('correct');
    } else if (idx === selectedIndex && idx !== q.correct) {
      opt.classList.add('incorrect');
    }
    opt.style.pointerEvents = 'none';
  });

  if (selectedIndex === q.correct) {
    score += 100;
    document.getElementById('score').textContent = score;
  }

  setTimeout(() => {
    document.getElementById('nextButton').style.display = 'block';
  }, 1200);
}

function nextQuestion() {
  currentQuestionIndex++;
  if (currentQuestionIndex < questions.length) {
    loadQuestion();
  } else {
    endGame();
  }
}

function updateGameProgress() {
  const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
  document.getElementById('progressFill').style.width = progress + '%';
}

function endGame() {
  // Stop audio when game ends
  if (currentAudio) {
    currentAudio.pause();
    currentAudio = null;
  }

  document.getElementById('gameArea').style.display = 'none';
  document.getElementById('gameOver').style.display = 'block';

  const percentage = (score / (questions.length * 100)) * 100;
  let performance;
  if (percentage >= 80) performance = "Excellent! You're a true anime expert! üèÜ";
  else if (percentage >= 60) performance = "Great job! You know your anime well! üëè";
  else if (percentage >= 40) performance = "Not bad, but there's room for improvement! üìö";
  else performance = "Time to watch more anime openings! üòÖ";

  document.getElementById('finalScore').innerHTML =
    `${score}/${questions.length * 100} points<br>${performance}`;
}

function restartGame() {
  currentQuestionIndex = 0;
  score = 0;
  answered = false;

  if (currentAudio) {
    currentAudio.pause();
    currentAudio = null;
  }

  document.getElementById('score').textContent = '0';
  document.getElementById('gameArea').style.display = 'block';
  document.getElementById('gameOver').style.display = 'none';

  loadQuestion();
}

window.onload = loadQuestion;
</script>
</body>
</html>